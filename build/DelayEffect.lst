ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 4
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"DelayEffect.cpp"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.text._ZN11DelayEffect11UpdateDelayEv,"ax",%progbits
  19              		.align	1
  20              		.global	_ZN11DelayEffect11UpdateDelayEv
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	_ZN11DelayEffect11UpdateDelayEv:
  26              	.LFB5842:
  27              		.file 1 "DelayEffect.cpp"
   1:DelayEffect.cpp **** #include "DelayEffect.h"
   2:DelayEffect.cpp **** #include "Thaumazein.h" // For global variables and Daisy hardware access
   3:DelayEffect.cpp **** 
   4:DelayEffect.cpp **** // Removed multi-line comment about assumed global variables
   5:DelayEffect.cpp **** 
   6:DelayEffect.cpp **** namespace DelayEffect {
   7:DelayEffect.cpp **** 
   8:DelayEffect.cpp **** void UpdateDelay() {
  28              		.loc 1 8 20 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
   9:DelayEffect.cpp ****     delay.SetFeedback(delay_feedback_val * 0.98f); 
  33              		.loc 1 9 5 view .LVU1
  34              	.LVL0:
  35              	.LBB58:
  36              	.LBI58:
  37              		.file 2 "Effects/EchoDelay.h"
   1:Effects/EchoDelay.h **** #pragma once
   2:Effects/EchoDelay.h **** #ifndef INFS_ECHODELAY_H
   3:Effects/EchoDelay.h **** #define INFS_ECHODELAY_H
   4:Effects/EchoDelay.h **** 
   5:Effects/EchoDelay.h **** #include <daisysp.h>
   6:Effects/EchoDelay.h **** #include "BiquadFilters.h"
   7:Effects/EchoDelay.h **** #include "DSPUtils.h"
   8:Effects/EchoDelay.h **** 
   9:Effects/EchoDelay.h **** namespace infrasonic {
  10:Effects/EchoDelay.h **** 
  11:Effects/EchoDelay.h **** /**
  12:Effects/EchoDelay.h ****  * @brief
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 2


  13:Effects/EchoDelay.h ****  * Tape-ish echo delay.
  14:Effects/EchoDelay.h ****  *   - Feedback is unbounded, but signal is soft-clipped
  15:Effects/EchoDelay.h ****  *   - Output is full-wet, should be mixed with dry signal externally
  16:Effects/EchoDelay.h ****  *
  17:Effects/EchoDelay.h ****  * @tparam MaxLength Max length of delay in samples
  18:Effects/EchoDelay.h ****  */
  19:Effects/EchoDelay.h **** template<size_t MaxLength>
  20:Effects/EchoDelay.h **** class EchoDelay {
  21:Effects/EchoDelay.h **** 
  22:Effects/EchoDelay.h ****     public:
  23:Effects/EchoDelay.h **** 
  24:Effects/EchoDelay.h ****         EchoDelay() {}
  25:Effects/EchoDelay.h ****         ~EchoDelay() {}
  26:Effects/EchoDelay.h **** 
  27:Effects/EchoDelay.h ****         void Init(float sample_rate)
  28:Effects/EchoDelay.h ****         {
  29:Effects/EchoDelay.h ****             sample_rate_ = sample_rate;
  30:Effects/EchoDelay.h ****             delayLine_.Init();
  31:Effects/EchoDelay.h ****             bpf_.Init(sample_rate);
  32:Effects/EchoDelay.h ****             bpf_.SetParams(800.0f, 1.0f);
  33:Effects/EchoDelay.h ****         }
  34:Effects/EchoDelay.h **** 
  35:Effects/EchoDelay.h ****         /**
  36:Effects/EchoDelay.h ****          * @brief Set the approximate lag time (smoothing) for delay time changes, in seconds
  37:Effects/EchoDelay.h ****          */
  38:Effects/EchoDelay.h ****         void SetLagTime(const float time_s)
  39:Effects/EchoDelay.h ****         {
  40:Effects/EchoDelay.h ****             delay_smooth_coef_ = onepole_coef(time_s, sample_rate_);
  41:Effects/EchoDelay.h ****         }
  42:Effects/EchoDelay.h **** 
  43:Effects/EchoDelay.h ****         /**
  44:Effects/EchoDelay.h ****          * @brief Set the Delay Time in seconds
  45:Effects/EchoDelay.h ****          *
  46:Effects/EchoDelay.h ****          * @param time_s Delay time in seconds. Will be truncated to MaxLength.
  47:Effects/EchoDelay.h ****          * @param immediately If true, sets delay time immediately with no smoothing.
  48:Effects/EchoDelay.h ****          */
  49:Effects/EchoDelay.h ****         void SetDelayTime(const float time_s, bool immediately = false)
  50:Effects/EchoDelay.h ****         {
  51:Effects/EchoDelay.h ****             delay_time_target_ = time_s;
  52:Effects/EchoDelay.h ****             if (immediately) delay_time_current_ = time_s;
  53:Effects/EchoDelay.h ****         }
  54:Effects/EchoDelay.h **** 
  55:Effects/EchoDelay.h ****         /**
  56:Effects/EchoDelay.h ****          * @brief
  57:Effects/EchoDelay.h ****          * Set the feedback amount (linear multiplier).
  58:Effects/EchoDelay.h ****          * This can be >1 in magnitude for saturated swells, or negative.
  59:Effects/EchoDelay.h ****          *
  60:Effects/EchoDelay.h ****          * NOTE: This is not internally smoothed. Use external smoothing if desired.
  61:Effects/EchoDelay.h ****          *
  62:Effects/EchoDelay.h ****          * @param feedback
  63:Effects/EchoDelay.h ****          */
  64:Effects/EchoDelay.h ****         void SetFeedback(const float feedback)
  38              		.loc 2 64 14 view .LVU2
  39              	.LBE58:
  40              		.loc 1 9 22 is_stmt 0 view .LVU3
  41 0000 0A4A     		ldr	r2, .L2
  42              	.LVL1:
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 3


  43              		.loc 1 9 22 view .LVU4
  44 0002 9FED0B7A 		vldr.32	s14, .L2+4
  45 0006 D2ED007A 		vldr.32	s15, [r2]
  46              	.LBB61:
  47              	.LBB59:
  65:Effects/EchoDelay.h ****         {
  66:Effects/EchoDelay.h ****             feedback_ = feedback;
  48              		.loc 2 66 23 view .LVU5
  49 000a 0A4B     		ldr	r3, .L2+8
  50              	.LBE59:
  51              	.LBE61:
  52              		.loc 1 9 22 view .LVU6
  53 000c 67EE877A 		vmul.f32	s15, s15, s14
  54              	.LVL2:
  10:DelayEffect.cpp ****     float delay_time_s = 0.01f + delay_time_val * 0.99f; 
  55              		.loc 1 10 49 view .LVU7
  56 0010 094A     		ldr	r2, .L2+12
  57              		.loc 1 10 11 view .LVU8
  58 0012 9FED0A7A 		vldr.32	s14, .L2+16
  59 0016 D2ED006A 		vldr.32	s13, [r2]
  60              	.LBB62:
  61              	.LBB60:
  62              		.loc 2 66 23 view .LVU9
  63 001a C3ED047A 		vstr.32	s15, [r3, #16]
  64              	.LVL3:
  65              		.loc 2 66 23 view .LVU10
  66              	.LBE60:
  67              	.LBE62:
  68              		.loc 1 10 5 is_stmt 1 view .LVU11
  69              		.loc 1 10 11 is_stmt 0 view .LVU12
  70 001e DFED087A 		vldr.32	s15, .L2+20
  71 0022 E6EE877A 		vfma.f32	s15, s13, s14
  72              	.LVL4:
  11:DelayEffect.cpp ****     delay.SetDelayTime(delay_time_s);
  73              		.loc 1 11 5 is_stmt 1 view .LVU13
  74              	.LBB63:
  75              	.LBI63:
  49:Effects/EchoDelay.h ****         {
  76              		.loc 2 49 14 view .LVU14
  77              	.LBB64:
  51:Effects/EchoDelay.h ****             if (immediately) delay_time_current_ = time_s;
  78              		.loc 2 51 32 is_stmt 0 view .LVU15
  79 0026 C3ED027A 		vstr.32	s15, [r3, #8]
  80              	.LVL5:
  51:Effects/EchoDelay.h ****             if (immediately) delay_time_current_ = time_s;
  81              		.loc 2 51 32 view .LVU16
  82              	.LBE64:
  83              	.LBE63:
  12:DelayEffect.cpp **** }
  84              		.loc 1 12 1 view .LVU17
  85 002a 7047     		bx	lr
  86              	.L3:
  87              		.align	2
  88              	.L2:
  89 002c 00000000 		.word	delay_feedback_val
  90 0030 48E17A3F 		.word	1065017672
  91 0034 00000000 		.word	delay
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 4


  92 0038 00000000 		.word	delay_time_val
  93 003c A4707D3F 		.word	1065185444
  94 0040 0AD7233C 		.word	1008981770
  95              		.cfi_endproc
  96              	.LFE5842:
  98              		.section	.text._ZN11DelayEffect18ApplyDelayToOutputEPKfPfjf,"ax",%progbits
  99              		.align	1
 100              		.global	_ZN11DelayEffect18ApplyDelayToOutputEPKfPfjf
 101              		.syntax unified
 102              		.thumb
 103              		.thumb_func
 105              	_ZN11DelayEffect18ApplyDelayToOutputEPKfPfjf:
 106              	.LVL6:
 107              	.LFB5843:
  13:DelayEffect.cpp **** 
  14:DelayEffect.cpp **** void ApplyDelayToOutput(const float* mixed_signal_input, // This will be mix_buffer_out
  15:DelayEffect.cpp ****                         daisy::AudioHandle::InterleavingOutputBuffer out,
  16:DelayEffect.cpp ****                         size_t size,
  17:DelayEffect.cpp ****                         float dry_level) {
 108              		.loc 1 17 42 is_stmt 1 view -0
 109              		.cfi_startproc
 110              		@ args = 0, pretend = 0, frame = 0
 111              		@ frame_needed = 0, uses_anonymous_args = 0
  18:DelayEffect.cpp ****     float wet_level = 1.0f - dry_level; 
 112              		.loc 1 18 5 view .LVU19
 113              		.loc 1 18 11 is_stmt 0 view .LVU20
 114 0000 F7EE007A 		vmov.f32	s15, #1.0e+0
 115 0004 5F4B     		ldr	r3, .L15
  17:DelayEffect.cpp ****     float wet_level = 1.0f - dry_level; 
 116              		.loc 1 17 42 view .LVU21
 117 0006 F0B5     		push	{r4, r5, r6, r7, lr}
 118              		.cfi_def_cfa_offset 20
 119              		.cfi_offset 4, -20
 120              		.cfi_offset 5, -16
 121              		.cfi_offset 6, -12
 122              		.cfi_offset 7, -8
 123              		.cfi_offset 14, -4
  19:DelayEffect.cpp ****     
  20:DelayEffect.cpp ****     float dry_level_clamped = fmaxf(0.0f, fminf(dry_level, 1.0f));
 124              		.loc 1 20 36 view .LVU22
 125 0008 0025     		movs	r5, #0
  18:DelayEffect.cpp ****     
 126              		.loc 1 18 11 view .LVU23
 127 000a 77EEC05A 		vsub.f32	s11, s15, s0
 128              	.LVL7:
 129              		.loc 1 20 5 is_stmt 1 view .LVU24
 130              		.loc 1 20 36 is_stmt 0 view .LVU25
 131 000e 80FE670A 		vminnm.f32	s0, s0, s15
 132              	.LVL8:
 133              		.loc 1 20 36 view .LVU26
 134 0012 DFED5D7A 		vldr.32	s15, .L15+4
 135              	.LBB93:
  21:DelayEffect.cpp **** 
  22:DelayEffect.cpp ****     float norm_factor = static_cast<float>(NUM_VOICES) * MASTER_VOLUME;
  23:DelayEffect.cpp ****     if (norm_factor == 0.0f) { // Prevent division by zero
  24:DelayEffect.cpp ****         // Handle the case where norm_factor is zero
  25:DelayEffect.cpp ****         // This is a placeholder and should be replaced with an appropriate handling logic
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 5


  26:DelayEffect.cpp ****         norm_factor = 1.0f; // Using a default value to avoid division by zero
  27:DelayEffect.cpp ****     }
  28:DelayEffect.cpp ****     
  29:DelayEffect.cpp ****     for (size_t i = 0; i < size; i += 2) {
 136              		.loc 1 29 17 view .LVU27
 137 0016 AC46     		mov	ip, r5
 138              	.LBE93:
  20:DelayEffect.cpp **** 
 139              		.loc 1 20 36 view .LVU28
 140 0018 87FE800A 		vmaxnm.f32	s0, s15, s0
 141              	.LVL9:
  22:DelayEffect.cpp ****     if (norm_factor == 0.0f) { // Prevent division by zero
 142              		.loc 1 22 5 is_stmt 1 view .LVU29
  23:DelayEffect.cpp ****         // Handle the case where norm_factor is zero
 143              		.loc 1 23 5 view .LVU30
 144              		.loc 1 29 5 view .LVU31
 145              		.loc 1 29 5 is_stmt 0 view .LVU32
 146 001c D3E90646 		ldrd	r4, r6, [r3, #24]
 147              	.LVL10:
 148              	.L7:
 149              	.LBB179:
 150              		.loc 1 29 26 is_stmt 1 discriminator 3 view .LVU33
 151 0020 9445     		cmp	ip, r2
 152 0022 80F0AB80 		bcs	.L5
 153              	.LBB94:
  30:DelayEffect.cpp ****         // mixed_signal_input is effectively mix_buffer_out[i/2]
  31:DelayEffect.cpp ****         float raw_sample_from_buffer = mixed_signal_input[i/2];
 154              		.loc 1 31 9 discriminator 2 view .LVU34
 155              	.LVL11:
  32:DelayEffect.cpp ****         
  33:DelayEffect.cpp ****         float sample_to_delay = raw_sample_from_buffer / 32768.f / norm_factor;
 156              		.loc 1 33 9 discriminator 2 view .LVU35
  31:DelayEffect.cpp ****         
 157              		.loc 1 31 60 is_stmt 0 discriminator 2 view .LVU36
 158 0026 4FEA5C05 		lsr	r5, ip, #1
 159              		.loc 1 33 56 discriminator 2 view .LVU37
 160 002a 9FED587A 		vldr.32	s14, .L15+8
 161              	.LBB95:
 162              	.LBB96:
 163              	.LBB97:
 164              	.LBB98:
 165              		.file 3 "lib/DaisySP/Source/Utility/dsp.h"
   1:lib/DaisySP/Source/Utility/dsp.h **** /*
   2:lib/DaisySP/Source/Utility/dsp.h **** Copyright (c) 2020 Electrosmith, Corp, Emilie Gillet
   3:lib/DaisySP/Source/Utility/dsp.h **** 
   4:lib/DaisySP/Source/Utility/dsp.h **** Use of this source code is governed by an MIT-style
   5:lib/DaisySP/Source/Utility/dsp.h **** license that can be found in the LICENSE file or at
   6:lib/DaisySP/Source/Utility/dsp.h **** https://opensource.org/licenses/MIT.
   7:lib/DaisySP/Source/Utility/dsp.h **** */
   8:lib/DaisySP/Source/Utility/dsp.h **** 
   9:lib/DaisySP/Source/Utility/dsp.h **** /** Helpful defines, functions, and other utilities for use in/with daisysp modules.
  10:lib/DaisySP/Source/Utility/dsp.h **** */
  11:lib/DaisySP/Source/Utility/dsp.h **** #pragma once
  12:lib/DaisySP/Source/Utility/dsp.h **** #ifndef DSY_CORE_DSP
  13:lib/DaisySP/Source/Utility/dsp.h **** #define DSY_CORE_DSP
  14:lib/DaisySP/Source/Utility/dsp.h **** #include <cassert>
  15:lib/DaisySP/Source/Utility/dsp.h **** #include <cstdint>
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 6


  16:lib/DaisySP/Source/Utility/dsp.h **** #include <random>
  17:lib/DaisySP/Source/Utility/dsp.h **** #include <cmath>
  18:lib/DaisySP/Source/Utility/dsp.h **** 
  19:lib/DaisySP/Source/Utility/dsp.h **** /** PIs
  20:lib/DaisySP/Source/Utility/dsp.h **** */
  21:lib/DaisySP/Source/Utility/dsp.h **** #define PI_F 3.1415927410125732421875f
  22:lib/DaisySP/Source/Utility/dsp.h **** #define TWOPI_F (2.0f * PI_F)
  23:lib/DaisySP/Source/Utility/dsp.h **** #define HALFPI_F (PI_F * 0.5f)
  24:lib/DaisySP/Source/Utility/dsp.h **** #define DSY_MIN(in, mn) (in < mn ? in : mn)
  25:lib/DaisySP/Source/Utility/dsp.h **** #define DSY_MAX(in, mx) (in > mx ? in : mx)
  26:lib/DaisySP/Source/Utility/dsp.h **** #define DSY_CLAMP(in, mn, mx) (DSY_MIN(DSY_MAX(in, mn), mx))
  27:lib/DaisySP/Source/Utility/dsp.h **** #define DSY_COUNTOF(_arr) (sizeof(_arr) / sizeof(_arr[0]))
  28:lib/DaisySP/Source/Utility/dsp.h **** 
  29:lib/DaisySP/Source/Utility/dsp.h **** namespace daisysp
  30:lib/DaisySP/Source/Utility/dsp.h **** {
  31:lib/DaisySP/Source/Utility/dsp.h **** //Avoids division for random floats. e.g. rand() * kRandFrac
  32:lib/DaisySP/Source/Utility/dsp.h **** static constexpr float kRandFrac = 1.f / (float)RAND_MAX;
  33:lib/DaisySP/Source/Utility/dsp.h **** 
  34:lib/DaisySP/Source/Utility/dsp.h **** //Convert from semitones to other units. e.g. 2 ^ (kOneTwelfth * x)
  35:lib/DaisySP/Source/Utility/dsp.h **** static constexpr float kOneTwelfth = 1.f / 12.f;
  36:lib/DaisySP/Source/Utility/dsp.h **** 
  37:lib/DaisySP/Source/Utility/dsp.h **** /** efficient floating point min/max
  38:lib/DaisySP/Source/Utility/dsp.h **** c/o stephen mccaul
  39:lib/DaisySP/Source/Utility/dsp.h **** */
  40:lib/DaisySP/Source/Utility/dsp.h **** inline float fmax(float a, float b)
  41:lib/DaisySP/Source/Utility/dsp.h **** {
  42:lib/DaisySP/Source/Utility/dsp.h ****     float r;
  43:lib/DaisySP/Source/Utility/dsp.h **** #ifdef __arm__
  44:lib/DaisySP/Source/Utility/dsp.h ****     asm("vmaxnm.f32 %[d], %[n], %[m]" : [d] "=t"(r) : [n] "t"(a), [m] "t"(b) :);
  45:lib/DaisySP/Source/Utility/dsp.h **** #else
  46:lib/DaisySP/Source/Utility/dsp.h ****     r = (a > b) ? a : b;
  47:lib/DaisySP/Source/Utility/dsp.h **** #endif // __arm__
  48:lib/DaisySP/Source/Utility/dsp.h ****     return r;
  49:lib/DaisySP/Source/Utility/dsp.h **** }
  50:lib/DaisySP/Source/Utility/dsp.h **** 
  51:lib/DaisySP/Source/Utility/dsp.h **** inline float fmin(float a, float b)
  52:lib/DaisySP/Source/Utility/dsp.h **** {
  53:lib/DaisySP/Source/Utility/dsp.h ****     float r;
  54:lib/DaisySP/Source/Utility/dsp.h **** #ifdef __arm__
  55:lib/DaisySP/Source/Utility/dsp.h ****     asm("vminnm.f32 %[d], %[n], %[m]" : [d] "=t"(r) : [n] "t"(a), [m] "t"(b) :);
  56:lib/DaisySP/Source/Utility/dsp.h **** #else
  57:lib/DaisySP/Source/Utility/dsp.h ****     r = (a < b) ? a : b;
  58:lib/DaisySP/Source/Utility/dsp.h **** #endif // __arm__
  59:lib/DaisySP/Source/Utility/dsp.h ****     return r;
  60:lib/DaisySP/Source/Utility/dsp.h **** }
  61:lib/DaisySP/Source/Utility/dsp.h **** 
  62:lib/DaisySP/Source/Utility/dsp.h **** /** quick fp clamp
  63:lib/DaisySP/Source/Utility/dsp.h **** */
  64:lib/DaisySP/Source/Utility/dsp.h **** inline float fclamp(float in, float min, float max)
  65:lib/DaisySP/Source/Utility/dsp.h **** {
  66:lib/DaisySP/Source/Utility/dsp.h ****     return fmin(fmax(in, min), max);
  67:lib/DaisySP/Source/Utility/dsp.h **** }
  68:lib/DaisySP/Source/Utility/dsp.h **** 
  69:lib/DaisySP/Source/Utility/dsp.h **** /** From Musicdsp.org "Fast power and root estimates for 32bit floats)
  70:lib/DaisySP/Source/Utility/dsp.h **** Original code by Stefan Stenzel
  71:lib/DaisySP/Source/Utility/dsp.h **** These are approximations
  72:lib/DaisySP/Source/Utility/dsp.h **** */
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 7


  73:lib/DaisySP/Source/Utility/dsp.h **** inline float fastpower(float f, int n)
  74:lib/DaisySP/Source/Utility/dsp.h **** {
  75:lib/DaisySP/Source/Utility/dsp.h ****     long *lp, l;
  76:lib/DaisySP/Source/Utility/dsp.h ****     lp = (long *)(&f);
  77:lib/DaisySP/Source/Utility/dsp.h ****     l  = *lp;
  78:lib/DaisySP/Source/Utility/dsp.h ****     l -= 0x3F800000;
  79:lib/DaisySP/Source/Utility/dsp.h ****     l <<= (n - 1);
  80:lib/DaisySP/Source/Utility/dsp.h ****     l += 0x3F800000;
  81:lib/DaisySP/Source/Utility/dsp.h ****     *lp = l;
  82:lib/DaisySP/Source/Utility/dsp.h ****     return f;
  83:lib/DaisySP/Source/Utility/dsp.h **** }
  84:lib/DaisySP/Source/Utility/dsp.h **** 
  85:lib/DaisySP/Source/Utility/dsp.h **** inline float fastroot(float f, int n)
  86:lib/DaisySP/Source/Utility/dsp.h **** {
  87:lib/DaisySP/Source/Utility/dsp.h ****     long *lp, l;
  88:lib/DaisySP/Source/Utility/dsp.h ****     lp = (long *)(&f);
  89:lib/DaisySP/Source/Utility/dsp.h ****     l  = *lp;
  90:lib/DaisySP/Source/Utility/dsp.h ****     l -= 0x3F800000;
  91:lib/DaisySP/Source/Utility/dsp.h ****     l >>= (n - 1);
  92:lib/DaisySP/Source/Utility/dsp.h ****     l += 0x3F800000;
  93:lib/DaisySP/Source/Utility/dsp.h ****     *lp = l;
  94:lib/DaisySP/Source/Utility/dsp.h ****     return f;
  95:lib/DaisySP/Source/Utility/dsp.h **** }
  96:lib/DaisySP/Source/Utility/dsp.h **** 
  97:lib/DaisySP/Source/Utility/dsp.h **** /** Significantly more efficient than fmodf(x, 1.0f) for calculating
  98:lib/DaisySP/Source/Utility/dsp.h ****  *  the decimal part of a floating point value.
  99:lib/DaisySP/Source/Utility/dsp.h ****  */
 100:lib/DaisySP/Source/Utility/dsp.h **** inline float fastmod1f(float x)
 101:lib/DaisySP/Source/Utility/dsp.h **** {
 102:lib/DaisySP/Source/Utility/dsp.h ****     return x - floorf(x);
 103:lib/DaisySP/Source/Utility/dsp.h **** }
 104:lib/DaisySP/Source/Utility/dsp.h **** 
 105:lib/DaisySP/Source/Utility/dsp.h **** /** From http://openaudio.blogspot.com/2017/02/faster-log10-and-pow.html
 106:lib/DaisySP/Source/Utility/dsp.h **** No approximation, pow10f(x) gives a 90% speed increase over powf(10.f, x)
 107:lib/DaisySP/Source/Utility/dsp.h **** */
 108:lib/DaisySP/Source/Utility/dsp.h **** inline float pow10f(float f)
 109:lib/DaisySP/Source/Utility/dsp.h **** {
 110:lib/DaisySP/Source/Utility/dsp.h ****     return expf(2.302585092994046f * f);
 111:lib/DaisySP/Source/Utility/dsp.h **** }
 112:lib/DaisySP/Source/Utility/dsp.h **** 
 113:lib/DaisySP/Source/Utility/dsp.h **** /* Original code for fastlog2f by Dr. Paul Beckmann from the ARM community forum, adapted from the 
 114:lib/DaisySP/Source/Utility/dsp.h **** About 25% performance increase over std::log10f
 115:lib/DaisySP/Source/Utility/dsp.h **** */
 116:lib/DaisySP/Source/Utility/dsp.h **** inline float fastlog2f(float f)
 117:lib/DaisySP/Source/Utility/dsp.h **** {
 118:lib/DaisySP/Source/Utility/dsp.h ****     float frac;
 119:lib/DaisySP/Source/Utility/dsp.h ****     int   exp;
 120:lib/DaisySP/Source/Utility/dsp.h ****     frac = frexpf(fabsf(f), &exp);
 121:lib/DaisySP/Source/Utility/dsp.h ****     f    = 1.23149591368684f;
 122:lib/DaisySP/Source/Utility/dsp.h ****     f *= frac;
 123:lib/DaisySP/Source/Utility/dsp.h ****     f += -4.11852516267426f;
 124:lib/DaisySP/Source/Utility/dsp.h ****     f *= frac;
 125:lib/DaisySP/Source/Utility/dsp.h ****     f += 6.02197014179219f;
 126:lib/DaisySP/Source/Utility/dsp.h ****     f *= frac;
 127:lib/DaisySP/Source/Utility/dsp.h ****     f += -3.13396450166353f;
 128:lib/DaisySP/Source/Utility/dsp.h ****     f += exp;
 129:lib/DaisySP/Source/Utility/dsp.h ****     return (f);
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 8


 130:lib/DaisySP/Source/Utility/dsp.h **** }
 131:lib/DaisySP/Source/Utility/dsp.h **** 
 132:lib/DaisySP/Source/Utility/dsp.h **** inline float fastlog10f(float f)
 133:lib/DaisySP/Source/Utility/dsp.h **** {
 134:lib/DaisySP/Source/Utility/dsp.h ****     return fastlog2f(f) * 0.3010299956639812f;
 135:lib/DaisySP/Source/Utility/dsp.h **** }
 136:lib/DaisySP/Source/Utility/dsp.h **** 
 137:lib/DaisySP/Source/Utility/dsp.h **** /** Midi to frequency helper
 138:lib/DaisySP/Source/Utility/dsp.h **** */
 139:lib/DaisySP/Source/Utility/dsp.h **** inline float mtof(float m)
 140:lib/DaisySP/Source/Utility/dsp.h **** {
 141:lib/DaisySP/Source/Utility/dsp.h ****     return powf(2, (m - 69.0f) / 12.0f) * 440.0f;
 142:lib/DaisySP/Source/Utility/dsp.h **** }
 143:lib/DaisySP/Source/Utility/dsp.h **** 
 144:lib/DaisySP/Source/Utility/dsp.h **** 
 145:lib/DaisySP/Source/Utility/dsp.h **** /** one pole lpf
 146:lib/DaisySP/Source/Utility/dsp.h **** out is passed by reference, and must be retained between
 147:lib/DaisySP/Source/Utility/dsp.h **** calls to properly filter the signal
 148:lib/DaisySP/Source/Utility/dsp.h **** coeff can be calculated:
 149:lib/DaisySP/Source/Utility/dsp.h **** coeff = 1.0 / (time * sample_rate) ; where time is in seconds
 150:lib/DaisySP/Source/Utility/dsp.h **** */
 151:lib/DaisySP/Source/Utility/dsp.h **** inline void fonepole(float &out, float in, float coeff)
 152:lib/DaisySP/Source/Utility/dsp.h **** {
 153:lib/DaisySP/Source/Utility/dsp.h ****     out += coeff * (in - out);
 166              		.loc 3 153 9 discriminator 2 view .LVU38
 167 002e D3ED036A 		vldr.32	s13, [r3, #12]
 168              	.LBE98:
 169              	.LBE97:
 170              	.LBB101:
 171              	.LBB102:
 172              		.file 4 "lib/DaisySP/Source/Utility/delayline.h"
   1:lib/DaisySP/Source/Utility/delayline.h **** /*
   2:lib/DaisySP/Source/Utility/delayline.h **** Copyright (c) 2020 Electrosmith, Corp
   3:lib/DaisySP/Source/Utility/delayline.h **** 
   4:lib/DaisySP/Source/Utility/delayline.h **** Use of this source code is governed by an MIT-style
   5:lib/DaisySP/Source/Utility/delayline.h **** license that can be found in the LICENSE file or at
   6:lib/DaisySP/Source/Utility/delayline.h **** https://opensource.org/licenses/MIT.
   7:lib/DaisySP/Source/Utility/delayline.h **** */
   8:lib/DaisySP/Source/Utility/delayline.h **** 
   9:lib/DaisySP/Source/Utility/delayline.h **** #pragma once
  10:lib/DaisySP/Source/Utility/delayline.h **** #ifndef DSY_DELAY_H
  11:lib/DaisySP/Source/Utility/delayline.h **** #define DSY_DELAY_H
  12:lib/DaisySP/Source/Utility/delayline.h **** #include <stdlib.h>
  13:lib/DaisySP/Source/Utility/delayline.h **** #include <stdint.h>
  14:lib/DaisySP/Source/Utility/delayline.h **** namespace daisysp
  15:lib/DaisySP/Source/Utility/delayline.h **** {
  16:lib/DaisySP/Source/Utility/delayline.h **** /** Simple Delay line.
  17:lib/DaisySP/Source/Utility/delayline.h **** November 2019
  18:lib/DaisySP/Source/Utility/delayline.h **** 
  19:lib/DaisySP/Source/Utility/delayline.h **** Converted to Template December 2019
  20:lib/DaisySP/Source/Utility/delayline.h **** 
  21:lib/DaisySP/Source/Utility/delayline.h **** declaration example: (1 second of floats)
  22:lib/DaisySP/Source/Utility/delayline.h **** 
  23:lib/DaisySP/Source/Utility/delayline.h **** DelayLine<float, SAMPLE_RATE> del;
  24:lib/DaisySP/Source/Utility/delayline.h **** 
  25:lib/DaisySP/Source/Utility/delayline.h **** By: shensley
  26:lib/DaisySP/Source/Utility/delayline.h **** */
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 9


  27:lib/DaisySP/Source/Utility/delayline.h **** template <typename T, size_t max_size>
  28:lib/DaisySP/Source/Utility/delayline.h **** class DelayLine
  29:lib/DaisySP/Source/Utility/delayline.h **** {
  30:lib/DaisySP/Source/Utility/delayline.h ****   public:
  31:lib/DaisySP/Source/Utility/delayline.h ****     DelayLine() {}
  32:lib/DaisySP/Source/Utility/delayline.h ****     ~DelayLine() {}
  33:lib/DaisySP/Source/Utility/delayline.h ****     /** initializes the delay line by clearing the values within, and setting delay to 1 sample.
  34:lib/DaisySP/Source/Utility/delayline.h ****     */
  35:lib/DaisySP/Source/Utility/delayline.h ****     void Init() { Reset(); }
  36:lib/DaisySP/Source/Utility/delayline.h ****     /** clears buffer, sets write ptr to 0, and delay to 1 sample.
  37:lib/DaisySP/Source/Utility/delayline.h ****     */
  38:lib/DaisySP/Source/Utility/delayline.h ****     void Reset()
  39:lib/DaisySP/Source/Utility/delayline.h ****     {
  40:lib/DaisySP/Source/Utility/delayline.h ****         for(size_t i = 0; i < max_size; i++)
  41:lib/DaisySP/Source/Utility/delayline.h ****         {
  42:lib/DaisySP/Source/Utility/delayline.h ****             line_[i] = T(0);
  43:lib/DaisySP/Source/Utility/delayline.h ****         }
  44:lib/DaisySP/Source/Utility/delayline.h ****         write_ptr_ = 0;
  45:lib/DaisySP/Source/Utility/delayline.h ****         delay_     = 1;
  46:lib/DaisySP/Source/Utility/delayline.h ****     }
  47:lib/DaisySP/Source/Utility/delayline.h **** 
  48:lib/DaisySP/Source/Utility/delayline.h ****     /** sets the delay time in samples
  49:lib/DaisySP/Source/Utility/delayline.h ****         If a float is passed in, a fractional component will be calculated for interpolating the de
  50:lib/DaisySP/Source/Utility/delayline.h ****     */
  51:lib/DaisySP/Source/Utility/delayline.h ****     inline void SetDelay(size_t delay)
  52:lib/DaisySP/Source/Utility/delayline.h ****     {
  53:lib/DaisySP/Source/Utility/delayline.h ****         frac_  = 0.0f;
  54:lib/DaisySP/Source/Utility/delayline.h ****         delay_ = delay < max_size ? delay : max_size - 1;
  55:lib/DaisySP/Source/Utility/delayline.h ****     }
  56:lib/DaisySP/Source/Utility/delayline.h **** 
  57:lib/DaisySP/Source/Utility/delayline.h ****     /** sets the delay time in samples
  58:lib/DaisySP/Source/Utility/delayline.h ****         If a float is passed in, a fractional component will be calculated for interpolating the de
  59:lib/DaisySP/Source/Utility/delayline.h ****     */
  60:lib/DaisySP/Source/Utility/delayline.h ****     inline void SetDelay(float delay)
  61:lib/DaisySP/Source/Utility/delayline.h ****     {
  62:lib/DaisySP/Source/Utility/delayline.h ****         int32_t int_delay = static_cast<int32_t>(delay);
  63:lib/DaisySP/Source/Utility/delayline.h ****         frac_             = delay - static_cast<float>(int_delay);
  64:lib/DaisySP/Source/Utility/delayline.h ****         delay_ = static_cast<size_t>(int_delay) < max_size ? int_delay
 173              		.loc 4 64 60 discriminator 2 view .LVU39
 174 0032 4BF67F36 		movw	r6, #47999
 175              	.LBE102:
 176              	.LBE101:
 177              	.LBE96:
 178              	.LBE95:
  31:DelayEffect.cpp ****         
 179              		.loc 1 31 15 discriminator 2 view .LVU40
 180 0036 00EB8505 		add	r5, r0, r5, lsl #2
 181              	.LVL12:
 182              	.LBB169:
 183              	.LBB162:
 184              	.LBB105:
 185              	.LBB106:
  65:lib/DaisySP/Source/Utility/delayline.h ****                                                            : max_size - 1;
  66:lib/DaisySP/Source/Utility/delayline.h ****     }
  67:lib/DaisySP/Source/Utility/delayline.h **** 
  68:lib/DaisySP/Source/Utility/delayline.h ****     /** writes the sample of type T to the delay line, and advances the write ptr
  69:lib/DaisySP/Source/Utility/delayline.h ****     */
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 10


  70:lib/DaisySP/Source/Utility/delayline.h ****     inline void Write(const T sample)
  71:lib/DaisySP/Source/Utility/delayline.h ****     {
  72:lib/DaisySP/Source/Utility/delayline.h ****         line_[write_ptr_] = sample;
  73:lib/DaisySP/Source/Utility/delayline.h ****         write_ptr_        = (write_ptr_ - 1 + max_size) % max_size;
  74:lib/DaisySP/Source/Utility/delayline.h ****     }
  75:lib/DaisySP/Source/Utility/delayline.h **** 
  76:lib/DaisySP/Source/Utility/delayline.h ****     /** returns the next sample of type T in the delay line, interpolated if necessary.
  77:lib/DaisySP/Source/Utility/delayline.h ****     */
  78:lib/DaisySP/Source/Utility/delayline.h ****     inline const T Read() const
  79:lib/DaisySP/Source/Utility/delayline.h ****     {
  80:lib/DaisySP/Source/Utility/delayline.h ****         T a = line_[(write_ptr_ + delay_) % max_size];
 186              		.loc 4 80 43 discriminator 2 view .LVU41
 187 003a 4BF6803E 		movw	lr, #48000
 188              	.LBE106:
 189              	.LBE105:
 190              	.LBE162:
 191              	.LBE169:
 192              		.loc 1 33 56 discriminator 2 view .LVU42
 193 003e D5ED007A 		vldr.32	s15, [r5]
 194 0042 67EE877A 		vmul.f32	s15, s15, s14
 195              		.loc 1 33 15 discriminator 2 view .LVU43
 196 0046 9FED527A 		vldr.32	s14, .L15+12
 197 004a 87EE875A 		vdiv.f32	s10, s15, s14
 198              	.LVL13:
  34:DelayEffect.cpp **** 
  35:DelayEffect.cpp ****         float wet_sample = delay.Process(sample_to_delay); // delay object from Thaumazein.h
 199              		.loc 1 35 9 is_stmt 1 discriminator 2 view .LVU44
 200              	.LBB170:
 201              	.LBI95:
  67:Effects/EchoDelay.h ****         }
  68:Effects/EchoDelay.h **** 
  69:Effects/EchoDelay.h ****         inline float Process(const float in)
 202              		.loc 2 69 22 discriminator 2 view .LVU45
 203              	.LBB163:
 204              	.LBB111:
 205              	.LBI97:
 151:lib/DaisySP/Source/Utility/dsp.h **** {
 206              		.loc 3 151 13 discriminator 2 view .LVU46
 207              	.LBB99:
 208              		.loc 3 153 5 discriminator 2 view .LVU47
 209              		.loc 3 153 9 is_stmt 0 discriminator 2 view .LVU48
 210 004e D3ED017A 		vldr.32	s15, [r3, #4]
 211              		.loc 3 153 24 discriminator 2 view .LVU49
 212 0052 93ED027A 		vldr.32	s14, [r3, #8]
 213 0056 37EE677A 		vsub.f32	s14, s14, s15
 214              		.loc 3 153 9 discriminator 2 view .LVU50
 215 005a E6EE877A 		vfma.f32	s15, s13, s14
 216              	.LBE99:
 217              	.LBE111:
  70:Effects/EchoDelay.h ****         {
  71:Effects/EchoDelay.h ****             float out;
  72:Effects/EchoDelay.h ****             daisysp::fonepole(delay_time_current_, delay_time_target_, delay_smooth_coef_);
  73:Effects/EchoDelay.h ****             delayLine_.SetDelay(delay_time_current_ * sample_rate_);
 218              		.loc 2 73 32 discriminator 2 view .LVU51
 219 005e 93ED007A 		vldr.32	s14, [r3]
 220              	.LBB112:
 221              	.LBB100:
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 11


 222              		.loc 3 153 9 discriminator 2 view .LVU52
 223 0062 C3ED017A 		vstr.32	s15, [r3, #4]
 224              	.LVL14:
 225              		.loc 3 153 9 discriminator 2 view .LVU53
 226              	.LBE100:
 227              	.LBE112:
 228              		.loc 2 73 32 discriminator 2 view .LVU54
 229 0066 67EE877A 		vmul.f32	s15, s15, s14
 230              	.LVL15:
 231              	.LBB113:
 232              	.LBI101:
  60:lib/DaisySP/Source/Utility/delayline.h ****     {
 233              		.loc 4 60 17 is_stmt 1 discriminator 2 view .LVU55
 234              	.LBB103:
  62:lib/DaisySP/Source/Utility/delayline.h ****         frac_             = delay - static_cast<float>(int_delay);
 235              		.loc 4 62 17 is_stmt 0 discriminator 2 view .LVU56
 236 006a BDEEE77A 		vcvt.s32.f32	s14, s15
 237              	.LVL16:
  64:lib/DaisySP/Source/Utility/delayline.h ****                                                            : max_size - 1;
 238              		.loc 4 64 60 discriminator 2 view .LVU57
 239 006e 17EE105A 		vmov	r5, s14	@ int
  63:lib/DaisySP/Source/Utility/delayline.h ****         delay_ = static_cast<size_t>(int_delay) < max_size ? int_delay
 240              		.loc 4 63 37 discriminator 2 view .LVU58
 241 0072 F8EEC76A 		vcvt.f32.s32	s13, s14
  64:lib/DaisySP/Source/Utility/delayline.h ****                                                            : max_size - 1;
 242              		.loc 4 64 60 discriminator 2 view .LVU59
 243 0076 B542     		cmp	r5, r6
  63:lib/DaisySP/Source/Utility/delayline.h ****         delay_ = static_cast<size_t>(int_delay) < max_size ? int_delay
 244              		.loc 4 63 35 discriminator 2 view .LVU60
 245 0078 77EEE67A 		vsub.f32	s15, s15, s13
 246              	.LVL17:
  64:lib/DaisySP/Source/Utility/delayline.h ****                                                            : max_size - 1;
 247              		.loc 4 64 60 discriminator 2 view .LVU61
 248 007c 28BF     		it	cs
 249 007e 3546     		movcs	r5, r6
 250 0080 2E46     		mov	r6, r5
 251              	.LVL18:
  64:lib/DaisySP/Source/Utility/delayline.h ****                                                            : max_size - 1;
 252              		.loc 4 64 60 discriminator 2 view .LVU62
 253              	.LBE103:
 254              	.LBE113:
 255              	.LBB114:
 256              	.LBI105:
  78:lib/DaisySP/Source/Utility/delayline.h ****     {
 257              		.loc 4 78 20 is_stmt 1 discriminator 2 view .LVU63
 258              	.LBB107:
 259              		.loc 4 80 33 is_stmt 0 discriminator 2 view .LVU64
 260 0082 6519     		adds	r5, r4, r5
 261              	.LBE107:
 262              	.LBE114:
 263              	.LBB115:
 264              	.LBB104:
  63:lib/DaisySP/Source/Utility/delayline.h ****         delay_ = static_cast<size_t>(int_delay) < max_size ? int_delay
 265              		.loc 4 63 27 discriminator 2 view .LVU65
 266 0084 C3ED057A 		vstr.32	s15, [r3, #20]
 267              	.LBE104:
 268              	.LBE115:
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 12


 269              	.LBB116:
 270              	.LBB108:
 271              		.loc 4 80 43 discriminator 2 view .LVU66
 272 0088 B5FBFEF7 		udiv	r7, r5, lr
 273 008c 0EFB1757 		mls	r7, lr, r7, r5
  81:lib/DaisySP/Source/Utility/delayline.h ****         T b = line_[(write_ptr_ + delay_ + 1) % max_size];
 274              		.loc 4 81 42 discriminator 2 view .LVU67
 275 0090 0135     		adds	r5, r5, #1
  80:lib/DaisySP/Source/Utility/delayline.h ****         T b = line_[(write_ptr_ + delay_ + 1) % max_size];
 276              		.loc 4 80 11 discriminator 2 view .LVU68
 277 0092 03EB8707 		add	r7, r3, r7, lsl #2
 278 0096 97ED087A 		vldr.32	s14, [r7, #32]
 279              	.LVL19:
 280              		.loc 4 81 47 discriminator 2 view .LVU69
 281 009a B5FBFEF7 		udiv	r7, r5, lr
 282 009e 0EFB1755 		mls	r5, lr, r7, r5
 283              		.loc 4 81 11 discriminator 2 view .LVU70
 284 00a2 03EB8505 		add	r5, r3, r5, lsl #2
  82:lib/DaisySP/Source/Utility/delayline.h ****         return a + (b - a) * frac_;
 285              		.loc 4 82 23 discriminator 2 view .LVU71
 286 00a6 D5ED086A 		vldr.32	s13, [r5, #32]
 287              	.LBE108:
 288              	.LBE116:
 289              	.LBB117:
 290              	.LBB118:
 291              	.LBB119:
 292              	.LBB120:
 293              	.LBB121:
 294              		.file 5 "Effects/BiquadFilters.h"
   1:Effects/BiquadFilters.h **** #pragma once
   2:Effects/BiquadFilters.h **** #ifndef INFS_BIQUADFILTERS_H
   3:Effects/BiquadFilters.h **** #define INFS_BIQUADFILTERS_H
   4:Effects/BiquadFilters.h **** 
   5:Effects/BiquadFilters.h **** #include <cassert>
   6:Effects/BiquadFilters.h **** #include <array>
   7:Effects/BiquadFilters.h **** #include <daisysp.h>
   8:Effects/BiquadFilters.h **** 
   9:Effects/BiquadFilters.h **** namespace infrasonic {
  10:Effects/BiquadFilters.h **** 
  11:Effects/BiquadFilters.h **** /**
  12:Effects/BiquadFilters.h ****  *  Single precision 2nd order biquad filter section with support for stereo processing.
  13:Effects/BiquadFilters.h ****  *  NOTE: There are templated filter definitions at the bottom of this file for convenience. 
  14:Effects/BiquadFilters.h ****  */
  15:Effects/BiquadFilters.h **** class BiquadSection {
  16:Effects/BiquadFilters.h **** 
  17:Effects/BiquadFilters.h ****     public:
  18:Effects/BiquadFilters.h **** 
  19:Effects/BiquadFilters.h ****         enum class FilterType {
  20:Effects/BiquadFilters.h ****             LowPass,
  21:Effects/BiquadFilters.h ****             HighPass,
  22:Effects/BiquadFilters.h ****             BandPass
  23:Effects/BiquadFilters.h ****         };
  24:Effects/BiquadFilters.h **** 
  25:Effects/BiquadFilters.h ****         // Assumes normalized coefficients (a0 == 1)
  26:Effects/BiquadFilters.h ****         // Ordering numerator then denominator: {b0, b1, b2, a1, a2}
  27:Effects/BiquadFilters.h ****         using Coefficients = std::array<float, 5>;
  28:Effects/BiquadFilters.h **** 
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 13


  29:Effects/BiquadFilters.h ****         static const Coefficients CalculateCoefficients(const FilterType type, 
  30:Effects/BiquadFilters.h ****                                                         const float sample_rate,
  31:Effects/BiquadFilters.h ****                                                         const float cutoff_hz,
  32:Effects/BiquadFilters.h ****                                                         const float q);
  33:Effects/BiquadFilters.h **** 
  34:Effects/BiquadFilters.h ****         BiquadSection() {}
  35:Effects/BiquadFilters.h ****         ~BiquadSection() {}
  36:Effects/BiquadFilters.h **** 
  37:Effects/BiquadFilters.h ****         void SetCoefficients(const Coefficients coefficients) { coefs_ = coefficients; }
  38:Effects/BiquadFilters.h **** 
  39:Effects/BiquadFilters.h ****         inline float Process(const float in, const int channel)
  40:Effects/BiquadFilters.h ****         {
  41:Effects/BiquadFilters.h ****             assert(channel < 2);
  42:Effects/BiquadFilters.h **** 
  43:Effects/BiquadFilters.h ****             // TODO: arm accelerated version
  44:Effects/BiquadFilters.h **** 
  45:Effects/BiquadFilters.h ****             const float &b0 = coefs_[0];
  46:Effects/BiquadFilters.h ****             const float &b1 = coefs_[1];
  47:Effects/BiquadFilters.h ****             const float &b2 = coefs_[2];
  48:Effects/BiquadFilters.h ****             const float &a1 = coefs_[3];
  49:Effects/BiquadFilters.h ****             const float &a2 = coefs_[4];
  50:Effects/BiquadFilters.h **** 
  51:Effects/BiquadFilters.h ****             // Transposed direct form 2
  52:Effects/BiquadFilters.h ****             float y = b0 * in + s1_[channel];
 295              		.loc 5 52 23 discriminator 2 view .LVU72
 296 00aa 3A4D     		ldr	r5, .L15+16
 297              	.LBE121:
 298              	.LBE120:
 299              	.LBE119:
 300              	.LBE118:
 301              	.LBE117:
 302              	.LBB134:
 303              	.LBB109:
 304              		.loc 4 82 23 discriminator 2 view .LVU73
 305 00ac 76EEC76A 		vsub.f32	s13, s13, s14
 306              	.LBE109:
 307              	.LBE134:
 308              	.LBB135:
 309              	.LBB131:
 310              	.LBB128:
 311              	.LBB125:
 312              	.LBB122:
  53:Effects/BiquadFilters.h ****             s1_[channel] = s2_[channel] + in * b1 - a1 * y;
 313              		.loc 5 53 41 discriminator 2 view .LVU74
 314 00b0 95ED016A 		vldr.32	s12, [r5, #4]
 315              	.LBE122:
 316              	.LBE125:
 317              	.LBE128:
 318              	.LBE131:
 319              	.LBE135:
 320              	.LBB136:
 321              	.LBB110:
 322              		.loc 4 82 30 discriminator 2 view .LVU75
 323 00b4 A6EEA77A 		vfma.f32	s14, s13, s15
 324              	.LVL20:
 325              		.loc 4 82 30 discriminator 2 view .LVU76
 326              	.LBE110:
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 14


 327              	.LBE136:
 328              	.LBB137:
 329              	.LBI117:
  54:Effects/BiquadFilters.h ****             s2_[channel] = b2 * in - a2 * y;
  55:Effects/BiquadFilters.h ****             return y;
  56:Effects/BiquadFilters.h ****         }
  57:Effects/BiquadFilters.h **** 
  58:Effects/BiquadFilters.h ****     private:
  59:Effects/BiquadFilters.h ****         // coef
  60:Effects/BiquadFilters.h ****         Coefficients coefs_{0, 0, 0, 0, 0};
  61:Effects/BiquadFilters.h **** 
  62:Effects/BiquadFilters.h ****         // state
  63:Effects/BiquadFilters.h ****         float s1_[2] = {0, 0};
  64:Effects/BiquadFilters.h ****         float s2_[2] = {0, 0};
  65:Effects/BiquadFilters.h **** 
  66:Effects/BiquadFilters.h **** };
  67:Effects/BiquadFilters.h **** 
  68:Effects/BiquadFilters.h **** /// Templated cascaded biquad filter. Filter Order = 2 * NumSections.
  69:Effects/BiquadFilters.h **** /// NOTE: Only supports even-ordered filters.
  70:Effects/BiquadFilters.h **** template<size_t NumSections, BiquadSection::FilterType FilterType>
  71:Effects/BiquadFilters.h **** class BiquadCascade {
  72:Effects/BiquadFilters.h **** 
  73:Effects/BiquadFilters.h ****     static_assert(NumSections > 0, "Must have at least one section");
  74:Effects/BiquadFilters.h **** 
  75:Effects/BiquadFilters.h ****     public:
  76:Effects/BiquadFilters.h ****         BiquadCascade() {}
  77:Effects/BiquadFilters.h ****         ~BiquadCascade() {}
  78:Effects/BiquadFilters.h **** 
  79:Effects/BiquadFilters.h ****         // Individual param update methods recalculate coefficients
  80:Effects/BiquadFilters.h ****         // every time one of them is called. To update everything at once,
  81:Effects/BiquadFilters.h ****         // use SetParams()
  82:Effects/BiquadFilters.h **** 
  83:Effects/BiquadFilters.h ****         void Init(const float sample_rate) {
  84:Effects/BiquadFilters.h ****             sample_rate_ = sample_rate;
  85:Effects/BiquadFilters.h ****             cutoff_hz_ = sample_rate * 0.25f;
  86:Effects/BiquadFilters.h ****             SetFlatResponse();
  87:Effects/BiquadFilters.h ****         }
  88:Effects/BiquadFilters.h **** 
  89:Effects/BiquadFilters.h ****         inline void SetCutoff(const float cutoff_hz)
  90:Effects/BiquadFilters.h ****         {
  91:Effects/BiquadFilters.h ****             cutoff_hz_ = daisysp::fclamp(cutoff_hz, 1.f, sample_rate_ * 0.5f);
  92:Effects/BiquadFilters.h ****             updateCoefficients();
  93:Effects/BiquadFilters.h ****         }
  94:Effects/BiquadFilters.h **** 
  95:Effects/BiquadFilters.h ****         inline void SetQ(const float q)
  96:Effects/BiquadFilters.h ****         {
  97:Effects/BiquadFilters.h ****             for (size_t i=0; i<NumSections; i++) {
  98:Effects/BiquadFilters.h ****                 q_[i] = daisysp::fmax(q, 0.1f);
  99:Effects/BiquadFilters.h ****             }
 100:Effects/BiquadFilters.h ****             updateCoefficients();
 101:Effects/BiquadFilters.h ****         }
 102:Effects/BiquadFilters.h **** 
 103:Effects/BiquadFilters.h ****         /// Update params simultaneously, recalculating coefficients only once 
 104:Effects/BiquadFilters.h ****         inline void SetParams(const float cutoff_hz, const float q)
 105:Effects/BiquadFilters.h ****         {
 106:Effects/BiquadFilters.h ****             cutoff_hz_ = daisysp::fclamp(cutoff_hz, 1.f, sample_rate_ * 0.5f);
 107:Effects/BiquadFilters.h ****             for (size_t i=0; i<NumSections; i++) {
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 15


 108:Effects/BiquadFilters.h ****                 q_[i] = daisysp::fmax(q, 0.1f);
 109:Effects/BiquadFilters.h ****             }
 110:Effects/BiquadFilters.h ****             updateCoefficients();
 111:Effects/BiquadFilters.h ****         }
 112:Effects/BiquadFilters.h **** 
 113:Effects/BiquadFilters.h ****         /// Sets Q values in each section for a truly "flat" (-3dB cutoff point) response
 114:Effects/BiquadFilters.h ****         /// NOTE: per limitations of this class this only works for even-order filters
 115:Effects/BiquadFilters.h ****         inline void SetFlatResponse()
 116:Effects/BiquadFilters.h ****         {
 117:Effects/BiquadFilters.h ****             const float angleIncrement = 1.f / (4.f * static_cast<float>(NumSections));
 118:Effects/BiquadFilters.h ****             for (size_t i=0; i<NumSections; i++) {
 119:Effects/BiquadFilters.h ****                 q_[i] = 1.f / (2.f * cosf(PI_F * (angleIncrement * (i * 2 + 1))));
 120:Effects/BiquadFilters.h ****             }
 121:Effects/BiquadFilters.h ****             updateCoefficients();
 122:Effects/BiquadFilters.h ****         }
 123:Effects/BiquadFilters.h **** 
 124:Effects/BiquadFilters.h ****         inline float Process(const float in)
 330              		.loc 5 124 22 is_stmt 1 discriminator 2 view .LVU77
 331              	.LBB132:
 332              	.LBB129:
 125:Effects/BiquadFilters.h ****         {
 126:Effects/BiquadFilters.h ****             float out = in;
 127:Effects/BiquadFilters.h ****             for (auto &biquad : biquads_) {
 333              		.loc 5 127 13 discriminator 2 view .LVU78
 334              	.LBB126:
 335              	.LBI120:
  39:Effects/BiquadFilters.h ****         {
 336              		.loc 5 39 22 discriminator 2 view .LVU79
 337              	.LBB123:
  41:Effects/BiquadFilters.h **** 
 338              		.loc 5 41 13 discriminator 2 view .LVU80
  45:Effects/BiquadFilters.h ****             const float &b1 = coefs_[1];
 339              		.loc 5 45 13 discriminator 2 view .LVU81
  46:Effects/BiquadFilters.h ****             const float &b2 = coefs_[2];
 340              		.loc 5 46 13 discriminator 2 view .LVU82
  47:Effects/BiquadFilters.h ****             const float &a1 = coefs_[3];
 341              		.loc 5 47 13 discriminator 2 view .LVU83
  48:Effects/BiquadFilters.h ****             const float &a2 = coefs_[4];
 342              		.loc 5 48 13 discriminator 2 view .LVU84
  49:Effects/BiquadFilters.h **** 
 343              		.loc 5 49 13 discriminator 2 view .LVU85
  52:Effects/BiquadFilters.h ****             s1_[channel] = s2_[channel] + in * b1 - a1 * y;
 344              		.loc 5 52 13 discriminator 2 view .LVU86
  52:Effects/BiquadFilters.h ****             s1_[channel] = s2_[channel] + in * b1 - a1 * y;
 345              		.loc 5 52 19 is_stmt 0 discriminator 2 view .LVU87
 346 00b8 D5ED006A 		vldr.32	s13, [r5]
 347 00bc D5ED057A 		vldr.32	s15, [r5, #20]
 348 00c0 E6EE877A 		vfma.f32	s15, s13, s14
 349              	.LVL21:
  53:Effects/BiquadFilters.h ****             s2_[channel] = b2 * in - a2 * y;
 350              		.loc 5 53 13 is_stmt 1 discriminator 2 view .LVU88
  53:Effects/BiquadFilters.h ****             s2_[channel] = b2 * in - a2 * y;
 351              		.loc 5 53 41 is_stmt 0 discriminator 2 view .LVU89
 352 00c4 D5ED076A 		vldr.32	s13, [r5, #28]
 353 00c8 E7EE066A 		vfma.f32	s13, s14, s12
  53:Effects/BiquadFilters.h ****             s2_[channel] = b2 * in - a2 * y;
 354              		.loc 5 53 51 discriminator 2 view .LVU90
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 16


 355 00cc 95ED036A 		vldr.32	s12, [r5, #12]
 356 00d0 E6EE676A 		vfms.f32	s13, s12, s15
  54:Effects/BiquadFilters.h ****             return y;
 357              		.loc 5 54 36 discriminator 2 view .LVU91
 358 00d4 95ED026A 		vldr.32	s12, [r5, #8]
  53:Effects/BiquadFilters.h ****             s2_[channel] = b2 * in - a2 * y;
 359              		.loc 5 53 26 discriminator 2 view .LVU92
 360 00d8 C5ED056A 		vstr.32	s13, [r5, #20]
  54:Effects/BiquadFilters.h ****             return y;
 361              		.loc 5 54 13 is_stmt 1 discriminator 2 view .LVU93
  54:Effects/BiquadFilters.h ****             return y;
 362              		.loc 5 54 41 is_stmt 0 discriminator 2 view .LVU94
 363 00dc D5ED046A 		vldr.32	s13, [r5, #16]
  54:Effects/BiquadFilters.h ****             return y;
 364              		.loc 5 54 36 discriminator 2 view .LVU95
 365 00e0 66EEE76A 		vnmul.f32	s13, s13, s15
 366 00e4 E7EE066A 		vfma.f32	s13, s14, s12
 367              	.LBE123:
 368              	.LBE126:
 369              	.LBE129:
 370              	.LBE132:
 371              	.LBE137:
 372              	.LBB138:
 373              	.LBB139:
 154:lib/DaisySP/Source/Utility/dsp.h **** }
 155:lib/DaisySP/Source/Utility/dsp.h **** 
 156:lib/DaisySP/Source/Utility/dsp.h **** /** Curves to use with the fmap function */
 157:lib/DaisySP/Source/Utility/dsp.h **** enum class Mapping
 158:lib/DaisySP/Source/Utility/dsp.h **** {
 159:lib/DaisySP/Source/Utility/dsp.h ****     LINEAR,
 160:lib/DaisySP/Source/Utility/dsp.h ****     EXP,
 161:lib/DaisySP/Source/Utility/dsp.h ****     LOG,
 162:lib/DaisySP/Source/Utility/dsp.h **** };
 163:lib/DaisySP/Source/Utility/dsp.h **** 
 164:lib/DaisySP/Source/Utility/dsp.h **** /** Maps a float between a specified range, using a specified curve.
 165:lib/DaisySP/Source/Utility/dsp.h ****  *
 166:lib/DaisySP/Source/Utility/dsp.h ****  *  \param in a value between 0 to 1 that will be mapped to the new range.
 167:lib/DaisySP/Source/Utility/dsp.h ****  *  \param min the new minimum value
 168:lib/DaisySP/Source/Utility/dsp.h ****  *  \param max the new maxmimum value
 169:lib/DaisySP/Source/Utility/dsp.h ****  *  \param curve a Mapping Value to adjust the response curve of the transformation
 170:lib/DaisySP/Source/Utility/dsp.h ****  *               defaults to Linear. @see Mapping
 171:lib/DaisySP/Source/Utility/dsp.h ****  *
 172:lib/DaisySP/Source/Utility/dsp.h ****  *  When using the log curve min and max, must be greater than zero.
 173:lib/DaisySP/Source/Utility/dsp.h ****  *
 174:lib/DaisySP/Source/Utility/dsp.h ****  *  \retval returns the transformed float within the new range.
 175:lib/DaisySP/Source/Utility/dsp.h **** */
 176:lib/DaisySP/Source/Utility/dsp.h **** inline float
 177:lib/DaisySP/Source/Utility/dsp.h **** fmap(float in, float min, float max, Mapping curve = Mapping::LINEAR)
 178:lib/DaisySP/Source/Utility/dsp.h **** {
 179:lib/DaisySP/Source/Utility/dsp.h ****     switch(curve)
 180:lib/DaisySP/Source/Utility/dsp.h ****     {
 181:lib/DaisySP/Source/Utility/dsp.h ****         case Mapping::EXP:
 182:lib/DaisySP/Source/Utility/dsp.h ****             return fclamp(min + (in * in) * (max - min), min, max);
 183:lib/DaisySP/Source/Utility/dsp.h ****         case Mapping::LOG:
 184:lib/DaisySP/Source/Utility/dsp.h ****         {
 185:lib/DaisySP/Source/Utility/dsp.h ****             const float a = 1.f / log10f(max / min);
 186:lib/DaisySP/Source/Utility/dsp.h ****             return fclamp(min * powf(10, in / a), min, max);
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 17


 187:lib/DaisySP/Source/Utility/dsp.h ****         }
 188:lib/DaisySP/Source/Utility/dsp.h ****         case Mapping::LINEAR:
 189:lib/DaisySP/Source/Utility/dsp.h ****         default: return fclamp(min + in * (max - min), min, max);
 190:lib/DaisySP/Source/Utility/dsp.h ****     }
 191:lib/DaisySP/Source/Utility/dsp.h **** }
 192:lib/DaisySP/Source/Utility/dsp.h **** 
 193:lib/DaisySP/Source/Utility/dsp.h **** /** Simple 3-point median filter
 194:lib/DaisySP/Source/Utility/dsp.h **** c/o stephen mccaul
 195:lib/DaisySP/Source/Utility/dsp.h **** */
 196:lib/DaisySP/Source/Utility/dsp.h **** template <typename T>
 197:lib/DaisySP/Source/Utility/dsp.h **** T median(T a, T b, T c)
 198:lib/DaisySP/Source/Utility/dsp.h **** {
 199:lib/DaisySP/Source/Utility/dsp.h ****     return (b < a) ? (b < c) ? (c < a) ? c : a : b
 200:lib/DaisySP/Source/Utility/dsp.h ****                    : (a < c) ? (c < b) ? c : b : a;
 201:lib/DaisySP/Source/Utility/dsp.h **** }
 202:lib/DaisySP/Source/Utility/dsp.h **** 
 203:lib/DaisySP/Source/Utility/dsp.h **** /** Ported from pichenettes/eurorack/plaits/dsp/oscillator/oscillator.h
 204:lib/DaisySP/Source/Utility/dsp.h **** */
 205:lib/DaisySP/Source/Utility/dsp.h **** inline float ThisBlepSample(float t)
 206:lib/DaisySP/Source/Utility/dsp.h **** {
 207:lib/DaisySP/Source/Utility/dsp.h ****     return 0.5f * t * t;
 208:lib/DaisySP/Source/Utility/dsp.h **** }
 209:lib/DaisySP/Source/Utility/dsp.h **** 
 210:lib/DaisySP/Source/Utility/dsp.h **** /** Ported from pichenettes/eurorack/plaits/dsp/oscillator/oscillator.h
 211:lib/DaisySP/Source/Utility/dsp.h **** */
 212:lib/DaisySP/Source/Utility/dsp.h **** inline float NextBlepSample(float t)
 213:lib/DaisySP/Source/Utility/dsp.h **** {
 214:lib/DaisySP/Source/Utility/dsp.h ****     t = 1.0f - t;
 215:lib/DaisySP/Source/Utility/dsp.h ****     return -0.5f * t * t;
 216:lib/DaisySP/Source/Utility/dsp.h **** }
 217:lib/DaisySP/Source/Utility/dsp.h **** 
 218:lib/DaisySP/Source/Utility/dsp.h **** /** Ported from pichenettes/eurorack/plaits/dsp/oscillator/oscillator.h
 219:lib/DaisySP/Source/Utility/dsp.h **** */
 220:lib/DaisySP/Source/Utility/dsp.h **** inline float NextIntegratedBlepSample(float t)
 221:lib/DaisySP/Source/Utility/dsp.h **** {
 222:lib/DaisySP/Source/Utility/dsp.h ****     const float t1 = 0.5f * t;
 223:lib/DaisySP/Source/Utility/dsp.h ****     const float t2 = t1 * t1;
 224:lib/DaisySP/Source/Utility/dsp.h ****     const float t4 = t2 * t2;
 225:lib/DaisySP/Source/Utility/dsp.h ****     return 0.1875f - t1 + 1.5f * t2 - t4;
 226:lib/DaisySP/Source/Utility/dsp.h **** }
 227:lib/DaisySP/Source/Utility/dsp.h **** 
 228:lib/DaisySP/Source/Utility/dsp.h **** /** Ported from pichenettes/eurorack/plaits/dsp/oscillator/oscillator.h
 229:lib/DaisySP/Source/Utility/dsp.h **** */
 230:lib/DaisySP/Source/Utility/dsp.h **** inline float ThisIntegratedBlepSample(float t)
 231:lib/DaisySP/Source/Utility/dsp.h **** {
 232:lib/DaisySP/Source/Utility/dsp.h ****     return NextIntegratedBlepSample(1.0f - t);
 233:lib/DaisySP/Source/Utility/dsp.h **** }
 234:lib/DaisySP/Source/Utility/dsp.h **** 
 235:lib/DaisySP/Source/Utility/dsp.h **** /** Soft Limiting function ported extracted from pichenettes/stmlib */
 236:lib/DaisySP/Source/Utility/dsp.h **** inline float SoftLimit(float x)
 237:lib/DaisySP/Source/Utility/dsp.h **** {
 238:lib/DaisySP/Source/Utility/dsp.h ****     return x * (27.f + x * x) / (27.f + 9.f * x * x);
 239:lib/DaisySP/Source/Utility/dsp.h **** }
 240:lib/DaisySP/Source/Utility/dsp.h **** 
 241:lib/DaisySP/Source/Utility/dsp.h **** /** Soft Clipping function extracted from pichenettes/stmlib */
 242:lib/DaisySP/Source/Utility/dsp.h **** inline float SoftClip(float x)
 243:lib/DaisySP/Source/Utility/dsp.h **** {
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 18


 244:lib/DaisySP/Source/Utility/dsp.h ****     if(x < -3.0f)
 374              		.loc 3 244 5 discriminator 2 view .LVU96
 375 00e8 B8EE087A 		vmov.f32	s14, #-3.0e+0
 376              	.LVL22:
 377              		.loc 3 244 5 discriminator 2 view .LVU97
 378 00ec F4EEC77A 		vcmpe.f32	s15, s14
 379              	.LBE139:
 380              	.LBE138:
 381              	.LBB148:
 382              	.LBB133:
 383              	.LBB130:
 384              	.LBB127:
 385              	.LBB124:
  54:Effects/BiquadFilters.h ****             return y;
 386              		.loc 5 54 26 discriminator 2 view .LVU98
 387 00f0 C5ED076A 		vstr.32	s13, [r5, #28]
  55:Effects/BiquadFilters.h ****         }
 388              		.loc 5 55 13 is_stmt 1 discriminator 2 view .LVU99
 389              	.LVL23:
  55:Effects/BiquadFilters.h ****         }
 390              		.loc 5 55 13 is_stmt 0 discriminator 2 view .LVU100
 391              	.LBE124:
 392              	.LBE127:
 393              		.loc 5 127 13 is_stmt 1 discriminator 2 view .LVU101
 394              		.loc 5 127 13 discriminator 2 view .LVU102
 395              		.loc 5 127 13 is_stmt 0 discriminator 2 view .LVU103
 396              	.LBE130:
 397              	.LBE133:
 398              	.LBE148:
 399              	.LBB149:
 400              	.LBI138:
 242:lib/DaisySP/Source/Utility/dsp.h **** {
 401              		.loc 3 242 14 is_stmt 1 discriminator 2 view .LVU104
 402              	.LBB146:
 403              		.loc 3 244 5 discriminator 2 view .LVU105
 404 00f4 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 405 00f8 3AD4     		bmi	.L9
 406              	.LVL24:
 407              	.LBB140:
 408              	.LBI140:
 242:lib/DaisySP/Source/Utility/dsp.h **** {
 409              		.loc 3 242 14 view .LVU106
 410              	.LBB141:
 245:lib/DaisySP/Source/Utility/dsp.h ****         return -1.0f;
 246:lib/DaisySP/Source/Utility/dsp.h ****     else if(x > 3.0f)
 411              		.loc 3 246 10 view .LVU107
 412 00fa B0EE087A 		vmov.f32	s14, #3.0e+0
 413 00fe F4EEC77A 		vcmpe.f32	s15, s14
 414 0102 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 415 0106 36DC     		bgt	.L10
 247:lib/DaisySP/Source/Utility/dsp.h ****         return 1.0f;
 248:lib/DaisySP/Source/Utility/dsp.h ****     else
 249:lib/DaisySP/Source/Utility/dsp.h ****         return SoftLimit(x);
 416              		.loc 3 249 9 view .LVU108
 417              	.LVL25:
 418              	.LBB142:
 419              	.LBI142:
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 19


 236:lib/DaisySP/Source/Utility/dsp.h **** {
 420              		.loc 3 236 14 view .LVU109
 421              	.LBB143:
 238:lib/DaisySP/Source/Utility/dsp.h **** }
 422              		.loc 3 238 5 view .LVU110
 238:lib/DaisySP/Source/Utility/dsp.h **** }
 423              		.loc 3 238 22 is_stmt 0 view .LVU111
 424 0108 B3EE0B7A 		vmov.f32	s14, #2.7e+1
 238:lib/DaisySP/Source/Utility/dsp.h **** }
 425              		.loc 3 238 45 view .LVU112
 426 010c B2EE026A 		vmov.f32	s12, #9.0e+0
 238:lib/DaisySP/Source/Utility/dsp.h **** }
 427              		.loc 3 238 22 view .LVU113
 428 0110 F0EE476A 		vmov.f32	s13, s14
 238:lib/DaisySP/Source/Utility/dsp.h **** }
 429              		.loc 3 238 45 view .LVU114
 430 0114 27EE866A 		vmul.f32	s12, s15, s12
 238:lib/DaisySP/Source/Utility/dsp.h **** }
 431              		.loc 3 238 22 view .LVU115
 432 0118 E7EEA76A 		vfma.f32	s13, s15, s15
 238:lib/DaisySP/Source/Utility/dsp.h **** }
 433              		.loc 3 238 39 view .LVU116
 434 011c A6EE277A 		vfma.f32	s14, s12, s15
 238:lib/DaisySP/Source/Utility/dsp.h **** }
 435              		.loc 3 238 14 view .LVU117
 436 0120 66EEA76A 		vmul.f32	s13, s13, s15
 238:lib/DaisySP/Source/Utility/dsp.h **** }
 437              		.loc 3 238 52 view .LVU118
 438 0124 C6EE877A 		vdiv.f32	s15, s13, s14
 439              	.LVL26:
 440              	.L6:
 238:lib/DaisySP/Source/Utility/dsp.h **** }
 441              		.loc 3 238 52 view .LVU119
 442              	.LBE143:
 443              	.LBE142:
 444              	.LBE141:
 445              	.LBE140:
 446              	.LBE146:
 447              	.LBE149:
  74:Effects/EchoDelay.h ****             out = delayLine_.Read();
  75:Effects/EchoDelay.h ****             out = bpf_.Process(out);
  76:Effects/EchoDelay.h ****             out = daisysp::SoftClip(out);
  77:Effects/EchoDelay.h ****             delayLine_.Write(out * feedback_ + in);
 448              		.loc 2 77 29 view .LVU120
 449 0128 D3ED046A 		vldr.32	s13, [r3, #16]
 450              	.LBB150:
 451              	.LBB151:
  72:lib/DaisySP/Source/Utility/delayline.h ****         write_ptr_        = (write_ptr_ - 1 + max_size) % max_size;
 452              		.loc 4 72 27 view .LVU121
 453 012c 03EB8405 		add	r5, r3, r4, lsl #2
 454              	.LVL27:
  73:lib/DaisySP/Source/Utility/delayline.h ****     }
 455              		.loc 4 73 45 view .LVU122
 456 0130 04F53B44 		add	r4, r4, #47872
 457              	.LBE151:
 458              	.LBE150:
 459              	.LBE163:
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 20


 460              	.LBE170:
 461              	.LBE94:
  29:DelayEffect.cpp ****         // mixed_signal_input is effectively mix_buffer_out[i/2]
 462              		.loc 1 29 36 view .LVU123
 463 0134 0CF1020C 		add	ip, ip, #2
 464              	.LVL28:
  29:DelayEffect.cpp ****         // mixed_signal_input is effectively mix_buffer_out[i/2]
 465              		.loc 1 29 36 view .LVU124
 466 0138 0831     		adds	r1, r1, #8
 467              	.LBB176:
 468              	.LBB171:
 469              	.LBB164:
 470              	.LBB156:
 471              	.LBB152:
  73:lib/DaisySP/Source/Utility/delayline.h ****     }
 472              		.loc 4 73 45 view .LVU125
 473 013a 7F34     		adds	r4, r4, #127
 474              	.LBE152:
 475              	.LBE156:
 476              		.loc 2 77 29 view .LVU126
 477 013c B0EE457A 		vmov.f32	s14, s10
 478 0140 A6EEA77A 		vfma.f32	s14, s13, s15
 479              	.LVL29:
 480              	.LBB157:
 481              	.LBI150:
  70:lib/DaisySP/Source/Utility/delayline.h ****     {
 482              		.loc 4 70 17 is_stmt 1 view .LVU127
 483              	.LBE157:
 484              	.LBE164:
 485              	.LBE171:
  36:DelayEffect.cpp ****         
  37:DelayEffect.cpp ****         // MASTER_VOLUME is assumed to be from Thaumazein.h
  38:DelayEffect.cpp ****         float output_val = ((sample_to_delay * dry_level_clamped) + (wet_sample * wet_level)) * MAS
 486              		.loc 1 38 81 is_stmt 0 view .LVU128
 487 0144 65EEA77A 		vmul.f32	s15, s11, s15
 488              	.LVL30:
 489              		.loc 1 38 67 view .LVU129
 490 0148 E0EE057A 		vfma.f32	s15, s0, s10
 491              	.LBB172:
 492              	.LBB165:
 493              	.LBB158:
 494              	.LBB153:
  72:lib/DaisySP/Source/Utility/delayline.h ****         write_ptr_        = (write_ptr_ - 1 + max_size) % max_size;
 495              		.loc 4 72 27 view .LVU130
 496 014c 85ED087A 		vstr.32	s14, [r5, #32]
  73:lib/DaisySP/Source/Utility/delayline.h ****     }
 497              		.loc 4 73 57 view .LVU131
 498 0150 4BF68035 		movw	r5, #48000
 499              	.LBE153:
 500              	.LBE158:
 501              	.LBE165:
 502              	.LBE172:
 503              		.loc 1 38 15 view .LVU132
 504 0154 9FED107A 		vldr.32	s14, .L15+20
 505              	.LVL31:
 506              	.LBB173:
 507              	.LBB166:
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 21


 508              	.LBB159:
 509              	.LBB154:
  73:lib/DaisySP/Source/Utility/delayline.h ****     }
 510              		.loc 4 73 57 view .LVU133
 511 0158 B4FBF5F7 		udiv	r7, r4, r5
 512              	.LBE154:
 513              	.LBE159:
 514              	.LBE166:
 515              	.LBE173:
 516              		.loc 1 38 15 view .LVU134
 517 015c 67EE877A 		vmul.f32	s15, s15, s14
 518              	.LBB174:
 519              	.LBB167:
 520              	.LBB160:
 521              	.LBB155:
  73:lib/DaisySP/Source/Utility/delayline.h ****     }
 522              		.loc 4 73 57 view .LVU135
 523 0160 05FB1744 		mls	r4, r5, r7, r4
 524              	.LVL32:
  73:lib/DaisySP/Source/Utility/delayline.h ****     }
 525              		.loc 4 73 57 view .LVU136
 526              	.LBE155:
 527              	.LBE160:
 528              	.LBE167:
 529              	.LBE174:
 530              		.loc 1 38 9 is_stmt 1 view .LVU137
  39:DelayEffect.cpp ****         
  40:DelayEffect.cpp ****         out[i]     = output_val;
 531              		.loc 1 40 9 view .LVU138
 532              	.LBE176:
  29:DelayEffect.cpp ****         // mixed_signal_input is effectively mix_buffer_out[i/2]
 533              		.loc 1 29 5 is_stmt 0 view .LVU139
 534 0164 0125     		movs	r5, #1
 535              	.LBB177:
 536              		.loc 1 40 20 view .LVU140
 537 0166 41ED027A 		vstr.32	s15, [r1, #-8]
  41:DelayEffect.cpp ****         out[i+1]   = output_val;
 538              		.loc 1 41 9 is_stmt 1 view .LVU141
 539              		.loc 1 41 20 is_stmt 0 view .LVU142
 540 016a 41ED017A 		vstr.32	s15, [r1, #-4]
 541              	.LBE177:
  29:DelayEffect.cpp ****         // mixed_signal_input is effectively mix_buffer_out[i/2]
 542              		.loc 1 29 5 is_stmt 1 view .LVU143
 543              	.LVL33:
  29:DelayEffect.cpp ****         // mixed_signal_input is effectively mix_buffer_out[i/2]
 544              		.loc 1 29 5 is_stmt 0 view .LVU144
 545 016e 57E7     		b	.L7
 546              	.LVL34:
 547              	.L9:
 548              	.LBB178:
 549              	.LBB175:
 550              	.LBB168:
 551              	.LBB161:
 552              	.LBB147:
 245:lib/DaisySP/Source/Utility/dsp.h ****     else if(x > 3.0f)
 553              		.loc 3 245 17 view .LVU145
 554 0170 FFEE007A 		vmov.f32	s15, #-1.0e+0
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 22


 555              	.LVL35:
 245:lib/DaisySP/Source/Utility/dsp.h ****     else if(x > 3.0f)
 556              		.loc 3 245 17 view .LVU146
 557 0174 D8E7     		b	.L6
 558              	.LVL36:
 559              	.L10:
 560              	.LBB145:
 561              	.LBB144:
 247:lib/DaisySP/Source/Utility/dsp.h ****     else
 562              		.loc 3 247 16 view .LVU147
 563 0176 F7EE007A 		vmov.f32	s15, #1.0e+0
 564              	.LVL37:
 247:lib/DaisySP/Source/Utility/dsp.h ****     else
 565              		.loc 3 247 16 view .LVU148
 566 017a D5E7     		b	.L6
 567              	.LVL38:
 568              	.L5:
 247:lib/DaisySP/Source/Utility/dsp.h ****     else
 569              		.loc 3 247 16 view .LVU149
 570 017c 0DB1     		cbz	r5, .L4
 571 017e C3E90646 		strd	r4, r6, [r3, #24]
 572              	.L4:
 573              	.LBE144:
 574              	.LBE145:
 575              	.LBE147:
 576              	.LBE161:
 577              	.LBE168:
 578              	.LBE175:
 579              	.LBE178:
 580              	.LBE179:
  42:DelayEffect.cpp ****     }
  43:DelayEffect.cpp **** }
 581              		.loc 1 43 1 view .LVU150
 582 0182 F0BD     		pop	{r4, r5, r6, r7, pc}
 583              	.L16:
 584              		.align	2
 585              	.L15:
 586 0184 00000000 		.word	delay
 587 0188 00000000 		.word	0
 588 018c 00000038 		.word	939524096
 589 0190 33333340 		.word	1077097267
 590 0194 2CEE0200 		.word	delay+192044
 591 0198 3333333F 		.word	1060320051
 592              		.cfi_endproc
 593              	.LFE5843:
 595              		.text
 596              	.Letext0:
 597              		.file 6 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/machine/_default_types.h"
 598              		.file 7 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/sys/_stdint.h"
 599              		.file 8 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/stdint.h"
 600              		.file 9 "/Library/DaisyToolchain/0.2.0/arm/lib/gcc/arm-none-eabi/10.3.1/include/stddef.h"
 601              		.file 10 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cmath"
 602              		.file 11 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/std_abs.h"
 603              		.file 12 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cstddef"
 604              		.file 13 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cstdlib"
 605              		.file 14 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cstdint"
 606              		.file 15 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/arm-none-eabi/thumb/v
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 23


 607              		.file 16 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/type_traits"
 608              		.file 17 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/debug/debug.h"
 609              		.file 18 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/algorithmfwd.h"
 610              		.file 19 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/stl_pair.h"
 611              		.file 20 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/exception_ptr.h"
 612              		.file 21 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cstdarg"
 613              		.file 22 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cstdio"
 614              		.file 23 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cstring"
 615              		.file 24 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cwchar"
 616              		.file 25 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/clocale"
 617              		.file 26 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/basic_string.h"
 618              		.file 27 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/stl_iterator.h"
 619              		.file 28 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/array"
 620              		.file 29 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/uses_allocator.h
 621              		.file 30 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/tuple"
 622              		.file 31 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/functional"
 623              		.file 32 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/predefined_ops.h
 624              		.file 33 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/sys/_types.h"
 625              		.file 34 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/sys/reent.h"
 626              		.file 35 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/sys/lock.h"
 627              		.file 36 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/math.h"
 628              		.file 37 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/stdlib.h"
 629              		.file 38 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/math.h"
 630              		.file 39 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/stdlib.h"
 631              		.file 40 "lib/libdaisy/src/daisy_core.h"
 632              		.file 41 "lib/libdaisy/src/per/sai.h"
 633              		.file 42 "lib/libdaisy/src/hid/audio.h"
 634              		.file 43 "lib/libdaisy/src/util/wav_format.h"
 635              		.file 44 "lib/libdaisy/src/dev/sr_595.h"
 636              		.file 45 "lib/libdaisy/src/dev/max11300.h"
 637              		.file 46 "lib/libdaisy/src/daisy_seed.h"
 638              		.file 47 "/Library/DaisyToolchain/0.2.0/arm/lib/gcc/arm-none-eabi/10.3.1/include/stdarg.h"
 639              		.file 48 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/stdio.h"
 640              		.file 49 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/string.h"
 641              		.file 50 "lib/DaisySP/Source/Control/adenv.h"
 642              		.file 51 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/wchar.h"
 643              		.file 52 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/locale.h"
 644              		.file 53 "eurorack/stmlib/stmlib.h"
 645              		.file 54 "eurorack/plaits/dsp/dsp.h"
 646              		.file 55 "eurorack/plaits/dsp/engine/additive_engine.h"
 647              		.file 56 "eurorack/plaits/dsp/oscillator/oscillator.h"
 648              		.file 57 "eurorack/plaits/dsp/engine/chord_engine.h"
 649              		.file 58 "eurorack/plaits/dsp/physical_modelling/resonator.h"
 650              		.file 59 "eurorack/plaits/dsp/engine/particle_engine.h"
 651              		.file 60 "eurorack/plaits/dsp/physical_modelling/string.h"
 652              		.file 61 "eurorack/plaits/dsp/engine/string_engine.h"
 653              		.file 62 "eurorack/plaits/dsp/engine/swarm_engine.h"
 654              		.file 63 "eurorack/plaits/dsp/oscillator/variable_saw_oscillator.h"
 655              		.file 64 "eurorack/plaits/dsp/voice.h"
 656              		.file 65 "mpr121_daisy.h"
 657              		.file 66 "Arpeggiator.h"
 658              		.file 67 "Thaumazein.h"
 659              		.file 68 "DelayEffect.h"
 660              		.file 69 "<built-in>"
ARM GAS  /var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s 			page 24


DEFINED SYMBOLS
                            *ABS*:0000000000000000 DelayEffect.cpp
/var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s:19     .text._ZN11DelayEffect11UpdateDelayEv:0000000000000000 $t
/var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s:25     .text._ZN11DelayEffect11UpdateDelayEv:0000000000000000 _ZN11DelayEffect11UpdateDelayEv
/var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s:89     .text._ZN11DelayEffect11UpdateDelayEv:000000000000002c $d
/var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s:99     .text._ZN11DelayEffect18ApplyDelayToOutputEPKfPfjf:0000000000000000 $t
/var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s:105    .text._ZN11DelayEffect18ApplyDelayToOutputEPKfPfjf:0000000000000000 _ZN11DelayEffect18ApplyDelayToOutputEPKfPfjf
/var/folders/9s/8rp0_f2s1n31qbztm3b5_fdh0000gn/T//ccT2bBhc.s:586    .text._ZN11DelayEffect18ApplyDelayToOutputEPKfPfjf:0000000000000184 $d

UNDEFINED SYMBOLS
delay_feedback_val
delay
delay_time_val
